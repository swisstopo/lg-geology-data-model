# ESRI Geodatabase Schema Changes Report

Generated on: {{ date }}
Database: {{ database_name or "Unknown Database" }}

{% if changes.added or changes.removed or changes.changed or changes.iterable_removed %}
## Summary
## Summary

{% if changes.added -%}
- **{{ added|length }}** items added
{% endif -%}
{% if changes.removed -%}
- **{{ changes.removed|length }}** items removed
{% endif -%}
{% if changes.changed -%}
- **{{ changes.changed|length }}** items modified
{% endif -%}
{% if changes.iterable_removed -%}
- **{{ changes.iterable_removed|length }}** iterable items removed
{% endif %}

---

{% else %}
No changes detected in the geodatabase schema.
{% endif %}

{% if changes.added %}
## 🟢 Added Items

{% for item in changes.added %}
### {{ item.name or item.key }}
- **Type**: {{ item.type_ or "Unknown" }}
- **Location**: `{{ item.location }}`


{% endfor %}
{% endif %}

{% if changes.removed %}
## 🔴 Removed Items

{% for item in changes.removed %}
### {{ item.name or item.key }}
- **Type**: {{ item.type_ or "Unknown" }}
- **Location**: `{{ item.location }}`


{% endfor %}
{% endif %}

{% if changes.changed %}
## 🟡 Modified Items

{% for item in changes.changed %}
### {{ item.name or item.key }}
- **Location**: `{{ item.location }}`


{% if item.old_value is mapping and item.new_value is mapping %}
**Changes in coded values:**

*Removed values:*
{% for key, value in item.old_value.items() if key not in item.new_value %}
- `{{ key }}`: {{ value }}
{% else %}
- None
{% endfor %}

*Added values:*
{% for key, value in item.new_value.items() if key not in item.old_value %}
- `{{ key }}`: {{ value }}
{% else %}
- None
{% endfor %}

*Modified values:*
{% for key, value in item.new_value.items() if key in item.old_value and item.old_value[key] != value %}
- `{{ key }}`: `{{ item.old_value[key] }}` → `{{ value }}`
{% else %}
- None
{% endfor %}

{% else %}
**Value changed:**
- **From**: {{ item.old_value }}
- **To**: {{ item.new_value }}
{% endif %}

{% endfor %}
{% endif %}

{% if changes.iterable_removed %}
## 🗑️ Removed Iterable Items

{% for item in changes.iterable_removed %}
### Removed from {{ item.name }} {{item.type_}}

{% if item.removed_item is mapping %}
>>> Field: {{ item.removed_item.name }}  {{ item.removed_item.domain }}

{% else %}
  - {{ item.removed_item }}
{% endif %}

{% endfor %}
{% endif %}

---

*Report generated by ESRI Database Schema Diff Tool*